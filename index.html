<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>AniStream Player | Design Avançado e WebTorrent</title>
    
    <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@400;500;700;900&display=swap" rel="stylesheet">
    <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">
    
    <!-- Biblioteca WebTorrent -->
    <script src="https://cdn.jsdelivr.net/webtorrent/latest/webtorrent.min.js"></script>
    
    <style>
        /* =================================================================
           # PALETA DE CORES E VARIÁVEIS
           ================================================================= */
        :root {
            --primary: #00C4CC;         /* Ciano Suave - Ação, Progresso, Foco */
            --secondary: #FFD700;       /* Amarelo Ouro - Destaque, Botões Importantes */
            --blue-accent: #3A8EFC;     /* Azul Claro - Elementos Secundários de Foco */
            --bg-dark: #1E1E1E;         /* Fundo escuro principal (quase preto) */
            --bg-medium: #2A2A2A;       /* Fundo de cards/controles (boa separação) */
            --bg-light: #424242;        /* Borda/Hover leve */
            --text-light: #F5F5F5;      /* Texto principal (alto contraste) */
            --text-muted: #B0B0B0;      /* Texto secundário/cinza */
        }

        /* =================================================================
           # ESTILOS GERAIS
           ================================================================= */
        body, html {
            margin: 0;
            padding: 0;
            background-color: var(--bg-dark);
            color: var(--text-light);
            font-family: 'Roboto', sans-serif;
            height: 100%;
            /* Permite o scroll se o conteúdo for maior que a tela (principalmente para o status) */
            overflow-y: auto; 
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: flex-start; /* Alinha no topo, centraliza horizontalmente */
            padding-top: 30px; /* Espaço no topo */
            padding-bottom: 30px; 
        }

        .player-container {
            position: relative;
            width: 90vw;
            max-width: 1000px;
            aspect-ratio: 16 / 9;
            box-shadow: 0 8px 30px rgba(0, 0, 0, 0.7);
            border-radius: 12px;
            overflow: hidden;
            background-color: #000;
            margin-bottom: 20px; /* Espaço para a nova área de status */
        }

        .video-container {
            width: 100%;
            height: 100%;
            object-fit: contain;
            display: flex;
            justify-content: center;
            align-items: center;
            position: relative; 
        }

        .video-container video {
            width: 100%;
            height: 100%;
            object-fit: contain; 
            display: block;
        }

        .player-container.fullscreen {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            max-width: none;
            z-index: 9999;
            border-radius: 0;
        }

        /* =================================================================
           # CONTROLES DO PLAYER (Sem alteração significativa de layout)
           ================================================================= */
        .controls {
            position: absolute;
            bottom: 0;
            left: 0;
            right: 0;
            background: linear-gradient(to top, rgba(0, 0, 0, 0.8), rgba(0, 0, 0, 0));
            padding: 15px 15px 10px 15px;
            opacity: 0;
            transition: opacity 0.3s ease;
            cursor: default;
            z-index: 10;
        }
        
        .player-container:hover .controls,
        .player-container.show-controls .controls {
            opacity: 1;
        }

        .controls-row { display: flex; align-items: center; justify-content: space-between; }
        .left-controls, .right-controls { display: flex; align-items: center; }

        .control-btn {
            background: none; border: none; color: var(--text-light); cursor: pointer;
            padding: 8px; border-radius: 50%; margin: 0 4px; transition: background-color 0.2s;
            display: flex; align-items: center; justify-content: center;
        }

        .control-btn:hover { background-color: var(--bg-light); }
        .material-icons { font-size: 24px; color: var(--text-light); }
        .time-display { font-size: 14px; font-weight: 500; margin: 0 15px; color: var(--text-light); min-width: 100px; text-align: center; }

        /* Estilos de Range Slider (Volume) - Mantidos */
        input[type=range] { -webkit-appearance: none; width: 80px; height: 4px; background: var(--bg-light); border-radius: 2px; outline: none; transition: opacity 0.2s; margin: 0 5px; }
        input[type=range]::-webkit-slider-thumb { -webkit-appearance: none; appearance: none; width: 12px; height: 12px; border-radius: 50%; background: var(--primary); cursor: pointer; }

        /* Barra de Progresso - Mantida */
        .progress-bar-container { position: absolute; top: 0; left: 0; right: 0; height: 5px; cursor: pointer; transition: height 0.2s; }
        .progress-bar-container:hover { height: 10px; }
        .progress-bar { position: relative; height: 100%; background-color: rgba(255, 255, 255, 0.3); border-radius: 3px; }
        .progress-current { position: absolute; height: 100%; width: 0%; background-color: var(--primary); border-radius: 3px; }
        .progress-buffered { position: absolute; height: 100%; width: 0%; background-color: var(--blue-accent); opacity: 0.7; border-radius: 3px; }
        .progress-thumb { position: absolute; top: 50%; right: 0; transform: translate(50%, -50%); width: 12px; height: 12px; background-color: var(--primary); border-radius: 50%; opacity: 0; transition: opacity 0.2s, transform 0.2s; }
        .progress-bar-container:hover .progress-thumb { opacity: 1; }


        /* =================================================================
           # ESTILOS DE INPUT (Mantidos dentro do player-container)
           ================================================================= */
        .torrent-input-area {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            z-index: 20;
            text-align: center;
            padding: 30px; 
            background: var(--bg-medium); 
            border-radius: 12px;
            box-shadow: 0 4px 25px rgba(0, 0, 0, 0.7);
        }

        .torrent-input-area h2 { margin-top: 0; color: var(--primary); font-size: 1.8em; margin-bottom: 20px; }
        #magnet-uri-input { width: 350px; padding: 12px 15px; border: 2px solid var(--bg-light); border-radius: 8px; background-color: var(--bg-dark); color: var(--text-light); margin-bottom: 15px; font-size: 1em; transition: border-color 0.3s; }
        #magnet-uri-input:focus { outline: none; border-color: var(--primary); }
        #load-button { padding: 12px 25px; border: none; border-radius: 8px; background-color: var(--secondary); color: var(--bg-dark); font-weight: 700; cursor: pointer; transition: background-color 0.2s, transform 0.1s; }
        #load-button:hover { background-color: #FFEB3B; transform: translateY(-1px); }
        .torrent-input-area p { margin-top: 10px; font-size: 13px; color: var(--text-muted); }

        /* =================================================================
           # NOVO: ÁREA DE INFORMAÇÕES DO TORRENT (ABAIXO DO PLAYER)
           ================================================================= */
        #torrent-info-display {
            width: 90vw;
            max-width: 1000px;
            background-color: var(--bg-medium);
            border-radius: 12px;
            padding: 15px 20px;
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.4);
            display: none; /* Inicialmente oculto, só aparece ao carregar o link */
            flex-direction: column;
        }

        #torrent-info-display .info-row {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 5px;
            border-bottom: 1px solid var(--bg-light);
            padding-bottom: 5px;
        }
        
        #torrent-info-display .info-row:last-child {
            margin-bottom: 0;
            border-bottom: none;
            padding-bottom: 0;
        }

        .label {
            color: var(--text-muted);
            font-size: 0.9em;
            font-weight: 500;
        }

        .value {
            color: var(--text-light);
            font-size: 1em;
            font-weight: 700;
            text-align: right;
            max-width: 70%;
            overflow: hidden;
            text-overflow: ellipsis;
            white-space: nowrap;
        }

        #current-status-message {
            color: var(--primary); /* Destaque para o status atual */
            font-size: 1.1em;
            font-weight: 700;
            margin-top: 5px;
        }
        
        #current-status-message span {
            color: var(--text-light);
            font-weight: 500;
        }
    </style>
</head>
<body>

    <div id="player-container" class="player-container">
        
        <div id="video-container" class="video-container">
            <!-- ÁREA DE INPUT DE MAGNET LINK -->
            <div id="torrent-input-area" class="torrent-input-area">
                <h2>Carregar Magnet Link</h2>
                <input type="text" id="magnet-uri-input" placeholder="Cole seu Magnet URI aqui...">
                <button id="load-button">Carregar Vídeo</button>
                <p>
                    Atalhos: Espaço/K (Play/Pause), J/L (Seek +/- 10s), Setas (Volume/Seek +/- 5s), M (Mute), F (Fullscreen).
                </p>
            </div>
            
            <!-- O elemento <video> será injetado aqui pelo WebTorrent -->
        </div>

        <div id="controls" class="controls">
            <!-- Barra de Progresso -->
            <div id="progress-bar-container" class="progress-bar-container">
                <div id="progress-bar" class="progress-bar">
                    <div id="progress-buffered" class="progress-buffered"></div>
                    <div id="progress-current" class="progress-current"></div>
                    <div id="progress-thumb" class="progress-thumb"></div>
                </div>
            </div>

            <div class="controls-row">
                <div class="left-controls">
                    <button id="play-pause-btn" class="control-btn" title="Play/Pause (Space/K)">
                        <i id="play-pause-icon" class="material-icons">play_arrow</i>
                    </button>

                    <div class="volume-controls">
                        <button id="mute-btn" class="control-btn" title="Mute/Unmute (M)">
                            <i id="mute-icon" class="material-icons">volume_up</i>
                        </button>
                        <input type="range" id="volume-slider" min="0" max="1" step="0.05" value="1">
                    </div>

                    <span id="time-display" class="time-display">0:00 / 0:00</span>
                </div>

                <div class="right-controls">
                    <button id="fullscreen-btn" class="control-btn" title="Tela Cheia (F)">
                        <i id="fullscreen-icon" class="material-icons">fullscreen</i>
                    </button>
                </div>
            </div>
        </div>
    </div>
    
    <!-- NOVO CONTAINER DE INFORMAÇÕES DO TORRENT -->
    <div id="torrent-info-display">
        <div class="info-row">
            <span class="label">Status Atual:</span>
            <span id="current-status-message">Aguardando URI...</span>
        </div>
        <div class="info-row">
            <span class="label">Nome do Arquivo:</span>
            <span id="file-name" class="value">N/A</span>
        </div>
        <div class="info-row">
            <span class="label">Velocidade Download:</span>
            <span id="download-speed" class="value">0.00 B/s</span>
        </div>
        <div class="info-row">
            <span class="label">Progresso Total:</span>
            <span id="progress-percent" class="value">0%</span>
        </div>
        <div class="info-row">
            <span class="label">Peers Conectados:</span>
            <span id="peer-count" class="value">0</span>
        </div>
    </div>

    <script type="module">
        // =================================================================
        // # VARIÁVEIS GLOBAIS
        // =================================================================
        const client = new WebTorrent();
        let videoElement = null; 
        let currentTorrent = null;

        // =================================================================
        // # REFERÊNCIAS DE ELEMENTOS HTML
        // =================================================================
        const playerContainer = document.getElementById('player-container');
        const videoContainer = document.getElementById('video-container');
        const controls = document.getElementById('controls');
        // ... (Outros controles) ...
        const magnetUriInput = document.getElementById('magnet-uri-input');
        const loadButton = document.getElementById('load-button');
        const torrentInputArea = document.getElementById('torrent-input-area');
        
        // NOVAS REFERÊNCIAS PARA INFORMAÇÕES DE STATUS
        const torrentInfoDisplay = document.getElementById('torrent-info-display');
        const currentStatusMessage = document.getElementById('current-status-message');
        const fileNameDisplay = document.getElementById('file-name');
        const downloadSpeedDisplay = document.getElementById('download-speed');
        const progressPercentDisplay = document.getElementById('progress-percent');
        const peerCountDisplay = document.getElementById('peer-count');
        
        // Referências de Controles (para evitar Uncaught errors no JS)
        const playPauseButton = document.getElementById('play-pause-btn');
        const playPauseIcon = document.getElementById('play-pause-icon');
        const muteButton = document.getElementById('mute-btn');
        const muteIcon = document.getElementById('mute-icon');
        const volumeSlider = document.getElementById('volume-slider');
        const timeDisplay = document.getElementById('time-display');
        const progressBarContainer = document.getElementById('progress-bar-container');
        const progressCurrent = document.getElementById('progress-current');
        const progressBuffered = document.getElementById('progress-buffered');
        const progressThumb = document.getElementById('progress-thumb');
        const fullscreenButton = document.getElementById('fullscreen-btn');


        // =================================================================
        // # FUNÇÕES DE UTILIADADE
        // =================================================================

        /** Formata tempo, progresso e volume... (Funções auxiliares não duplicadas) **/

        function formatTime(seconds) {
            if (isNaN(seconds) || seconds === Infinity) return '0:00';
            const s = Math.floor(seconds);
            const m = Math.floor(s / 60);
            const h = Math.floor(m / 60);
            const displayM = m % 60;
            const displayS = s % 60;
            
            let timeString = `${displayM}:${String(displayS).padStart(2, '0')}`;
            if (h > 0) {
                timeString = `${h}:${String(displayM).padStart(2, '0')}:${String(displayS).padStart(2, '0')}`;
            }
            return timeString;
        }
        
        function updateProgress() {
            if (!videoElement) return;
            const currentTime = videoElement.currentTime;
            const duration = videoElement.duration;
            
            if (isNaN(duration) || duration <= 0) {
                progressCurrent.style.width = '0%';
                progressThumb.style.left = '0%';
                timeDisplay.textContent = `${formatTime(currentTime)} / 0:00`;
                return;
            }

            const percentage = (currentTime / duration) * 100;
            progressCurrent.style.width = `${percentage}%`;
            progressThumb.style.left = `${percentage}%`;
            timeDisplay.textContent = `${formatTime(currentTime)} / ${formatTime(duration)}`;
        }

        function updateBuffer() {
            if (!videoElement || videoElement.buffered.length === 0) {
                progressBuffered.style.width = '0%';
                return;
            }

            const duration = videoElement.duration;
            const bufferedEnd = videoElement.buffered.end(videoElement.buffered.length - 1);
            
            if (isNaN(duration) || duration <= 0) return;

            const percentage = (bufferedEnd / duration) * 100;
            progressBuffered.style.width = `${percentage}%`;
        }

        function formatSpeed(bytes) {
            if (bytes === 0) return '0.00 B/s';
            const k = 1024;
            const sizes = ['B/s', 'KB/s', 'MB/s', 'GB/s'];
            const i = Math.floor(Math.log(bytes) / Math.log(k));
            return (bytes / Math.pow(k, i)).toFixed(2) + ' ' + sizes[i];
        }
        
        /** (Funções de controle do player - Mantidas) **/
        function togglePlay() {
            if (!videoElement) return;
            if (videoElement.paused) {
                videoElement.play().catch(e => console.error("Erro ao tentar dar play:", e));
            } else {
                videoElement.pause();
            }
            updatePlayPauseIcon();
        }
        function toggleMute() {
            if (!videoElement) return;
            videoElement.muted = !videoElement.muted;
            updateMuteIcon();
            if (!videoElement.muted) { volumeSlider.value = videoElement.volume; }
        }
        function setVolume(volume) {
            if (!videoElement) return;
            videoElement.volume = volume;
            videoElement.muted = volume === 0;
            updateMuteIcon();
        }
        function seekRelative(seconds) {
            if (!videoElement) return;
            videoElement.currentTime = Math.max(0, Math.min(videoElement.duration, videoElement.currentTime + seconds));
        }
        function toggleFullscreen() {
            if (!videoElement) return;
            if (document.fullscreenElement) {
                document.exitFullscreen();
            } else if (playerContainer.requestFullscreen) {
                playerContainer.requestFullscreen();
            } else if (playerContainer.webkitRequestFullscreen) { 
                playerContainer.webkitRequestFullscreen();
            } else if (playerContainer.msRequestFullscreen) { 
                playerContainer.msRequestFullscreen();
            }
        }
        function updatePlayPauseIcon() {
            if (!videoElement) return;
            playPauseIcon.textContent = videoElement.paused ? 'play_arrow' : 'pause';
        }
        function updateMuteIcon() {
            if (!videoElement) return;
            if (videoElement.muted || videoElement.volume === 0) {
                muteIcon.textContent = 'volume_off';
            } else if (videoElement.volume < 0.5) {
                muteIcon.textContent = 'volume_down';
            } else {
                muteIcon.textContent = 'volume_up';
            }
        }
        function updateFullscreenIcon() {
            fullscreenIcon.textContent = document.fullscreenElement ? 'fullscreen_exit' : 'fullscreen';
        }


        // =================================================================
        // # FUNÇÃO DE ATUALIZAÇÃO DO STATUS DO TORRENT
        // =================================================================

        /**
         * Atualiza as informações do torrent no painel de status fixo.
         */
        function updateTorrentInfo() {
            if (!currentTorrent) {
                torrentInfoDisplay.style.display = 'none';
                currentStatusMessage.textContent = 'Aguardando URI...';
                fileNameDisplay.textContent = 'N/A';
                downloadSpeedDisplay.textContent = '0.00 B/s';
                progressPercentDisplay.textContent = '0%';
                peerCountDisplay.textContent = '0';
                return;
            }
            
            torrentInfoDisplay.style.display = 'flex';

            const progress = Math.round(currentTorrent.progress * 100);
            const speed = formatSpeed(currentTorrent.downloadSpeed);
            const peers = currentTorrent.numPeers;
            
            progressPercentDisplay.textContent = `${progress}%`;
            downloadSpeedDisplay.textContent = speed;
            peerCountDisplay.textContent = peers;

            // Lógica para a mensagem de status
            if (progress === 100) {
                currentStatusMessage.textContent = 'Download completo. Reproduzindo.';
            } else if (currentTorrent.paused) {
                 currentStatusMessage.textContent = `Pausado. Download ${progress}%.`;
            } else if (peers === 0) {
                 currentStatusMessage.textContent = 'Conectando (0 peers)...';
            } else {
                 currentStatusMessage.textContent = `Baixando... ${progress}%`;
            }
        }
        
        // =================================================================
        // # CONFIGURAÇÃO DE EVENTOS DO PLAYER
        // =================================================================
        function setupPlayerEvents(nativeVideo) {
            videoElement = nativeVideo;

            // Configuração dos Listeners do Player (Play/Pause, Volume, Tempo, Fullscreen)
            playPauseButton.addEventListener('click', togglePlay);
            nativeVideo.addEventListener('click', togglePlay);
            nativeVideo.addEventListener('play', updatePlayPauseIcon);
            nativeVideo.addEventListener('pause', updatePlayPauseIcon);
            nativeVideo.addEventListener('timeupdate', updateProgress);
            nativeVideo.addEventListener('progress', updateBuffer); 
            nativeVideo.addEventListener('loadedmetadata', () => {
                setVolume(volumeSlider.value); 
                updateProgress();
                updateBuffer();
            });
            muteButton.addEventListener('click', toggleMute);
            volumeSlider.addEventListener('input', (e) => setVolume(parseFloat(e.target.value)));
            nativeVideo.addEventListener('volumechange', updateMuteIcon);
            fullscreenButton.addEventListener('click', toggleFullscreen);
            document.addEventListener('fullscreenchange', updateFullscreenIcon);
            progressBarContainer.addEventListener('click', (e) => {
                const duration = videoElement.duration;
                if (isNaN(duration) || duration <= 0) return;
                const rect = progressBarContainer.getBoundingClientRect();
                const clickX = e.clientX - rect.left;
                videoElement.currentTime = duration * (clickX / rect.width);
            });
            
            // Lógica de esconder/mostrar os controles
            playerContainer.classList.add('show-controls'); // Visível no início
            let controlsTimeout;
            playerContainer.addEventListener('mousemove', () => {
                playerContainer.classList.add('show-controls');
                clearTimeout(controlsTimeout);
                if (!videoElement.paused) {
                    controlsTimeout = setTimeout(() => {
                        playerContainer.classList.remove('show-controls');
                    }, 3000);
                }
            });
            playerContainer.addEventListener('mouseleave', () => {
                if (!videoElement.paused) {
                    playerContainer.classList.remove('show-controls');
                }
            });
            playerContainer.addEventListener('mouseenter', () => {
                 playerContainer.classList.add('show-controls');
            });
            nativeVideo.addEventListener('pause', () => {
                playerContainer.classList.add('show-controls');
            });
            
            // Inicia o loop de atualização do WebTorrent
            setInterval(updateTorrentInfo, 1000);
        }
        
        // =================================================================
        // # LÓGICA DO WEBTORRENT
        // =================================================================

        /**
         * Carrega o torrent a partir do magnet link e configura o player.
         * @param {string} magnetURI - O Magnet URI do torrent.
         */
        function loadTorrent(magnetURI) {
            // 1. Limpa qualquer torrent anterior
            if (currentTorrent) {
                client.remove(currentTorrent);
            }
            
            // 2. Oculta o input e mostra o container de informações
            torrentInputArea.style.display = 'none'; 
            torrentInfoDisplay.style.display = 'flex';
            currentStatusMessage.textContent = 'Conectando aos peers...';

            client.add(magnetURI, (torrent) => {
                currentTorrent = torrent;
                
                let largestFile = null;
                torrent.files.forEach(file => {
                    if (!largestFile || file.length > largestFile.length) {
                        largestFile = file;
                    }
                });

                if (largestFile) {
                    fileNameDisplay.textContent = largestFile.name; // Exibe o nome do arquivo
                    currentStatusMessage.textContent = `Preparando: ${largestFile.name}...`;

                    // Remove elementos anteriores
                    while (videoContainer.firstChild) {
                        videoContainer.removeChild(videoContainer.firstChild);
                    }
                    // Adiciona o elemento de input de volta (oculto)
                    videoContainer.appendChild(torrentInputArea);

                    // Renderiza o arquivo no container de vídeo
                    largestFile.renderTo(videoContainer, {
                        controls: false, 
                        autoplay: true
                    }, (err, elem) => {
                        if (err) {
                            console.error('Erro ao renderizar vídeo:', err);
                            currentStatusMessage.textContent = 'Erro ao renderizar o vídeo. Tente outro Magnet Link.';
                            torrentInputArea.style.display = 'block';
                            currentTorrent = null;
                            torrentInfoDisplay.style.display = 'none';
                            return;
                        }
                        
                        currentStatusMessage.textContent = 'Reproduzindo...'; // Status final antes do loop de atualização
                        setupPlayerEvents(elem); 
                        controls.style.visibility = 'visible';
                        torrentInputArea.style.display = 'none'; 
                    });
                } else {
                    currentStatusMessage.textContent = 'Nenhum arquivo de vídeo encontrado no torrent.';
                    torrentInputArea.style.display = 'block';
                    torrentInfoDisplay.style.display = 'none';
                }
                
                // Eventos de progresso e done do torrent - Agora manipulados pelo updateTorrentInfo
                torrent.on('download', updateTorrentInfo);
                torrent.on('upload', updateTorrentInfo);
                torrent.on('wire', updateTorrentInfo); // Atualiza contagem de peers
                torrent.on('done', () => {
                    // Garante que o status seja atualizado para 100% e 'Download completo'
                    updateTorrentInfo();
                });

            }).on('error', (err) => {
                console.error('Erro no WebTorrent:', err);
                currentStatusMessage.textContent = `Erro: ${err.message}. Verifique o Magnet Link.`;
                torrentInputArea.style.display = 'block';
                torrentInfoDisplay.style.display = 'flex';
                // Garante que o nome do arquivo volte a N/A
                fileNameDisplay.textContent = 'Erro de Carregamento';
                currentTorrent = null;
            });
        }
        
        // =================================================================
        // # INICIALIZAÇÃO E EVENTOS GLOBAIS
        // =================================================================

        window.onload = function () {
            // Oculta tudo que não for o input
            controls.style.visibility = 'hidden'; 
            torrentInfoDisplay.style.display = 'none';

            // Evento para o botão de carregar
            loadButton.addEventListener('click', () => {
                const magnetURI = magnetUriInput.value.trim();
                if (magnetURI) {
                    loadTorrent(magnetURI);
                } else {
                    currentStatusMessage.textContent = 'Por favor, insira um Magnet URI válido.';
                    torrentInfoDisplay.style.display = 'flex';
                    setTimeout(() => updateTorrentInfo(), 2000); // Limpa o status após 2s se não houver carregamento
                }
            });
            
            // Também permite carregar ao pressionar Enter no input
            magnetUriInput.addEventListener('keypress', (e) => {
                if (e.key === 'Enter') {
                    loadButton.click();
                }
            });

            // Atalhos de teclado
            document.addEventListener('keydown', (e) => {
                if (!videoElement) return; 
                
                const isInputFocused = document.activeElement.tagName === 'INPUT' || document.activeElement.tagName === 'TEXTAREA';
                if (isInputFocused) return;
                
                switch (e.key) {
                    case ' ': 
                    case 'k': 
                        e.preventDefault(); 
                        togglePlay(); 
                        break;
                    
                    case 'j': 
                        e.preventDefault(); 
                        seekRelative(-10); 
                        break;
                    
                    case 'l': 
                        e.preventDefault(); 
                        seekRelative(10); 
                        break;
                    
                    case 'm': 
                        e.preventDefault(); 
                        toggleMute(); 
                        break;
                    
                    case 'f': 
                        e.preventDefault(); 
                        toggleFullscreen(); 
                        break;
                    
                    case 'ArrowUp': 
                        e.preventDefault(); 
                        const newVolUp = Math.min(1, videoElement.volume + 0.05); 
                        setVolume(newVolUp); 
                        volumeSlider.value = newVolUp; 
                        break;
                    
                    case 'ArrowDown': 
                        e.preventDefault(); 
                        const newVolDown = Math.max(0, videoElement.volume - 0.05); 
                        setVolume(newVolDown); 
                        volumeSlider.value = newVolDown; 
                        break;
                    
                    case 'ArrowLeft': 
                        e.preventDefault(); 
                        seekRelative(-5); 
                        break;
                    
                    case 'ArrowRight': 
                        e.preventDefault(); 
                        seekRelative(5); 
                        break;
                    
                    default: 
                        if (e.key >= '0' && e.key <= '9') { 
                            e.preventDefault(); 
                            const percentage = parseInt(e.key) / 10;
                            videoElement.currentTime = videoElement.duration * percentage;
                        } 
                        break;
                }
            });
        }
    </script>
</body>
</html>
